# 第6章：ドメインオブジェクトのライフサイクル

## 章の概要
ドメインオブジェクトライフサイクルを管理するパターンを導入：一貫性境界のための集約、作成のためのファクトリ、取得のためのリポジトリ。

## 主な内容

### 集約パターン
- 単一ルート下で関連エンティティと値オブジェクトをグループ化する一貫性境界
- 集約ルートが外部アクセスと変更のための単一エントリポイントとして機能
- ルートの変更制御により内部集約一貫性が維持される
- トランザクションは通常、ビジネス不変条件保存を確保するため集約境界に整合すべき

### ファクトリパターン
- ドメイン焦点を維持しながら複雑なオブジェクト作成ロジックをカプセル化
- ファクトリが新しく作成されたオブジェクトがすべてビジネス不変条件と制約を満たすことを保証
- 作成ロジックは集約ルート、別個のファクトリオブジェクト、ファクトリメソッドに埋め込まれる可能性
- ファクトリは使用準備完了の完全形成された有効ドメインオブジェクトを生成すべき

### リポジトリパターン
- 既存ドメインオブジェクトにアクセスするためのコレクション様インターフェースを提供
- ドメイン焦点クエリインターフェースを提示しながらデータアクセス関心をカプセル化
- リポジトリはデータ転送オブジェクトではなく、完全に再構成されたドメインオブジェクトを返すべき
- クエリメソッドは技術データベース用語ではなくドメイン言語と概念を使用すべき

## 重要ポイント
- **集約境界**：集約がビジネス不変条件を技術トランザクション境界に整合させる一貫性境界を定義
- **作成カプセル化**：ファクトリが複雑作成ロジックを隠しながら、すべて作成オブジェクトがドメイン要件とビジネスルールを満たすことを保証
- **アクセス抽象化**：リポジトリがドメインロジックからインフラストラクチャ複雑性を隠しながら、永続オブジェクトへのドメイン焦点アクセスを提供