# 第4章：ドメインの分離

## 章の概要
技術的関心からドメインロジックを分離し、ドメインモデルの純度を維持する手段として層化アーキテクチャを導入します。

## 主な内容

### 層化アーキテクチャパターン
- ドメイン層がビジネスロジックとルールを含み、技術インフラストラクチャから分離される
- アプリケーション層がドメインオブジェクトを調整するが、ビジネスロジック自体は含まない
- インフラストラクチャ層が永続化、メッセージング、外部システム統合を処理
- ユーザーインターフェース層がビジネスロジックなしで情報提示とユーザー入力取得を行う

### ドメイン層保護
- ドメインオブジェクトはデータベースやWebフレームワークなどインフラストラクチャ関心に依存してはならない
- ビジネスルールはユビキタス言語を使ってドメイン層で表現されるべき
- ドメイン層は外部依存や技術インフラストラクチャなしでテスト可能であるべき
- 依存性逆転によりドメイン層は安定を保ち、技術層は進化可能

### 分離の利益と課題
- クリーンな分離によりビジネスロジックと技術インフラストラクチャの独立進化が可能
- ドメインエキスパートは技術的複雑性なしで分離されたドメイン層を理解可能
- ドメインロジックが外部システムセットアップを必要としないため、テストが容易になる
- 層規律維持には継続的なアーキテクチャ監視とチーム規律が必要

## 重要ポイント
- **層分離**：ドメイン層をインフラストラクチャ依存から保護してビジネスロジック明確性を維持し、独立テストを可能にする
- **ビジネスロジック集中**：すべてのビジネスルールとドメイン知識は技術層に散らばるのではなく、ドメイン層に存在すべき
- **技術柔軟性**：適切な層化により中核ビジネスロジックに影響を与えることなく技術変更が可能となり、長期システム進化を支援