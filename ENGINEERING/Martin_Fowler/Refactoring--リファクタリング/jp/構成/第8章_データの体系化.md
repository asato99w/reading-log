# 第8章：データの体系化

## 章概要
この章はデータの構造化とアクセス方法を改善するリファクタリングに焦点を当て、コードをよりタイプセーフで意図明示的で柔軟にする。

## 主要内容
- **データアクセスとカプセル化**
  - フィールドの自己カプセル化：同じクラス内でもアクセサを使用
  - フィールドのカプセル化：フィールドをプライベートにし公開アクセサを提供
  - コレクションのカプセル化：読み取り専用ビューを返し修正メソッドを提供
  - 一貫したデータアクセスパターンの利点

- **オブジェクト指向データ構造**
  - データ値をオブジェクトで置換：プリミティブデータをオブジェクトに変換
  - 値を参照へ変更：オブジェクトを共有可能参照にする
  - 参照を値へ変更：オブジェクトを不変値にする
  - 配列をオブジェクトで置換：配列インデックスの代わりに名前付きフィールド使用
  - 観察データの複製：プレゼンテーションデータをドメインデータから分離

- **タイプコードリファクタリング**
  - タイプコードをクラスで置換：単純なタイプ安全性改善
  - タイプコードをサブクラスで置換：ポリモーフィックな振る舞いを可能に
  - タイプコードを状態/戦略で置換：動的タイプ変更
  - サブクラスをフィールドで置換：データのみ異なるサブクラス排除

- **データ関係管理**
  - 単方向関連を双方向へ変更：バックポインタ追加
  - 双方向関連を単方向へ変更：結合を減らす
  - マジックナンバーをシンボリック定数で置換：リテラル用の名前付き定数
  - オブジェクトライフサイクルと参照の管理

## 重要なポイント
- 適切なデータ組織はコードをより保守しやすく、エラーが起こりにくくする
- ドメイン概念を表現するにはプリミティブよりオブジェクトが良い
- タイプ安全性と意図明示コードは密接に関連