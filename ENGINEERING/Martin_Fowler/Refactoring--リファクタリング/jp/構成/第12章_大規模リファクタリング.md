# 第12章：大規模リファクタリング

## 章概要
この章は大規模な時間と労力を必要とするが、システム全体を変換できる大規模リファクタリングに対処する。これらのリファクタリングはしばしば数週間または数ヶ月かかるが、基本的なアーキテクチャ改善を可能にする。

## 主要内容
- **もつれた継承の解きほぐし**
  - 問題：継承階層が同時に2つの仕事をしている
  - 解決策：各責任のための別々の階層を作成
  - メカニクス：2つの仕事を識別、新しい階層作成、振る舞い移動
  - 継承がもつれて混乱している場合

- **手続き的設計をオブジェクトへ変換**
  - 問題：オブジェクトをデータ保持者として手続き的スタイルで書かれたコード
  - 解決策：手続き的モジュールからオブジェクトへ振る舞い移動
  - メカニクス：振る舞いクラスタ識別、クラス作成、メソッド移動
  - レガシー手続き的コードをオブジェクト指向設計へ変換

- **ドメインをプレゼンテーションから分離**
  - 問題：ビジネスロジックと混在したGUIコード
  - 解決策：プレゼンテーションから独立した別々のドメインモデル作成
  - メカニクス：ドメインクラス抽出、ビジネスルール移動、インターフェース作成
  - 複数プレゼンテーションとテスト可能ビジネスロジックを可能に

- **階層の抽出**
  - 問題：タイプコードに基づく複雑な条件ロジック
  - 解決策：ポリモーフィックな振る舞いを持つクラス階層作成
  - メカニクス：サブクラス作成、条件分岐移動、ポリモーフィズム適用
  - 大きなswitch文をオブジェクト指向設計で置換

## 重要なポイント
- 大規模リファクタリングは慎重な計画と段階的実行を必要とする
- 漸進的に解決できない基本的なアーキテクチャ問題に対処する
- 成功は変換全体を通じたシステム機能性維持に依存する
- これらのリファクタリングはしばしば数ヶ月かかるが、システム設計を劇的に改善できる