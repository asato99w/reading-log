# 第2章：リファクタリングの原則

## 章概要
この基礎章はリファクタリングを定義し、その利点を説明し、一般的な懸念に対処する。すべてのリファクタリング活動の基礎となる理論的・実践的枠組みを確立する。

## 主要内容
- **リファクタリングの定義**
  - 名詞定義：外部動作を変更せずに内部構造に行われる変更
  - 動詞定義：既存コードを再構築するプロセス
  - 設計改善とコード進化との関係
  - リファクタリングと書き直しの区別

- **なぜリファクタリングすべきか？**
  - コードの劣化を減らすことでソフトウェア設計を改善
  - 人間にとってソフトウェアを理解しやすくする
  - コード構造を明確にすることでバグ発見を支援
  - 変更を容易にすることでより速いプログラミングを支援
  - コード品質維持の経済的利益

- **いつリファクタリングすべきか？**
  - 3回ルール：1回目は実行、2回目は身震い、3回目はリファクタリング
  - 機能追加時：まずリファクタリングして追加を容易に
  - バグ修正時：リファクタリングが問題を明らかにする
  - コードレビュー時：共有知識が設計を改善
  - 通常の開発リズムの一部としてのリファクタリング

- **なぜリファクタリングしないか？**
  - 代わりにゼロから書き直すべき場合
  - 締切に近い場合
  - まず測定が必要なパフォーマンス懸念
  - 適切なテストカバレッジなしのレガシーコード

- **リファクタリングと設計**
  - リファクタリングが設計プロセスを変える方法
  - 進化的設計対事前設計
  - リファクタリング目標としてのデザインパターン
  - シンプルさと柔軟性のバランス

## 重要なポイント
- リファクタリングはランダムなコードクリーンアップではなく規律ある技術
- 小さく振る舞い保存の変更が重要な改善に蓄積
- テストは安全なリファクタリングに必須