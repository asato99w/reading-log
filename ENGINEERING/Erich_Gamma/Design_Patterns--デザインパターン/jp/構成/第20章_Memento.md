# 第20章：Memento（動作パターン）

## 章の概要
カプセル化を違反せずにオブジェクトの内部状態を捕獲・外部化し、後でオブジェクトをこの状態に復元できるようにします。

## 主な内容

### 意図と構造
- カプセル化を違反せずにオブジェクトの内部状態を捕獲
- 元に戻す機能のためのオブジェクトの以前の状態への復元を可能
- 複雑な内部状態を持つオブジェクトのスナップショット機能を提供
- アプリケーションでのチェックポイントとロールバック操作をサポート

### パターン参加者
- **Originator**：現在の内部状態のスナップショットを含むメメントを作成
- **Memento**：Originatorの内部状態を保存、他のオブジェクトによるアクセスから保護
- **Caretaker**：メメントの保管に責任を持つが、メメント内容を操作・検査しない

### 実装上の考慮事項
- メメントは復元に必要な状態のみを保存すべき
- Originatorには広いインターフェース、他のオブジェクトには狭いインターフェースを利用可能
- Caretakerがメメントライフサイクルを管理するがメメント内容にはアクセスしない
- メメントを頻繁に保存する場合、メモリオーバーヘッドが重要になる可能性

## 重要ポイント
- **カプセル化保持**：オブジェクトのカプセル化を破ることなく内部状態が捕獲・復元される
- **元に戻す機能**：アプリケーションでの洗練された元に戻す/やり直しメカニズムを可能
- **状態管理**：オブジェクト状態スナップショットと復元を処理するクリーンな方法を提供