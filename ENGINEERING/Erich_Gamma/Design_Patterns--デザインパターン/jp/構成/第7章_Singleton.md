# 第7章：Singleton（生成パターン）

## 章の概要
クラスのインスタンスが1つだけであることを保証し、そのインスタンスへのグローバルアクセスポイントを提供します。

## 主な内容

### 意図と構造
- クラスがアプリケーションライフタイム全体で正確に1つのインスタンスを持つことを保証
- アプリケーションの任意の場所から単一インスタンスへのグローバルアクセスポイント提供
- 複数インスタンス作成を防ぐためインスタンス化プロセス制御
- 単一アクセスポイントを持つべき共有リソースを管理

### パターン参加者
- **Singleton**：自身の単一インスタンスを維持し、静的メソッドによりグローバルアクセス提供するクラス
- **Client**：コンストラクタではなく静的getInstance()メソッドでSingletonインスタンスにアクセス

### 実装上の考慮事項
- 外部インスタンス化を防ぐためコンストラクタはprivateまたはprotectedにする必要
- マルチスレッド環境ではスレッドセーフティの慎重な考慮が必要
- 遅延初期化対即時初期化がパフォーマンスとリソース使用に影響
- シングルトンクラスのサブクラス化は重要な課題をもたらし一般的に避けるべき

### 一般的な実装バリエーション
- **即時初期化**：クラス読み込み時にインスタンス作成、スレッドセーフだがリソース浪費の可能性
- **遅延初期化**：最初のリクエスト時にインスタンス作成、スレッド同期が必要
- **スレッドセーフ遅延**：遅延初期化中のスレッドセーフティ確保に同期メカニズム使用
- **Double-Checked Locking**：同期オーバーヘッド削減でスレッドセーフ遅延初期化を最適化

## 重要ポイント
- **単一インスタンス保証**：Singletonは単一インスタンスのみ存在することを保証し、リソース競合を防ぎ一貫状態を維持
- **グローバルアクセス**：参照渡しなしでアプリケーション任意箇所から使用可能なグローバルアクセスポイント提供
- **制御されたインスタンス化**：クラス自身のインスタンス化プロセス制御で、遅延ローディングとリソース管理最適化を可能