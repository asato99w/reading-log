# 第11章：Decorator（構造パターン）

## 章の概要
オブジェクトの構造を変更せずに動的に追加責任を付与し、機能拡張のためのサブクラス化に対する柔軟な代替を提供します。

## 主な内容

### 意図と構造
- 構造変更なしでオブジェクトに新機能を動的追加
- オブジェクト動作拡張のための継承への柔軟代替を提供
- 装飾チェーンを通じて複数拡張の組み合わせを可能
- 責任を透過的に追加しながらインターフェース一貫性を維持

### パターン参加者
- **Component**：責任を動的追加できるオブジェクトの共通インターフェース
- **ConcreteComponent**：追加責任を付与できるオブジェクト
- **Decorator**：Componentオブジェクトへの参照を維持しComponentインターフェースに適合
- **ConcreteDecorator**：Decorator動作を拡張することでコンポーネントに責任を追加

### 実装上の考慮事項
- DecoratorインターフェースはComponentインターフェースと正確に一致して透明性を確保する必要
- Decoratorオブジェクトは様々な順序で交換可能・組み合わせ可能であるべき
- 装飾されたオブジェクトでは同一性比較が正しく動作しない場合がある
- 大量の小さなdecoratorクラスがシステム理解を複雑にする可能性

### 動作と結果
- Decoratorは再帰的に適用でき、複数の機能レイヤーを可能
- 実行時に動作を混合・調整できるため継承より柔軟
- 構成使用により階層高位の機能豊富クラスを回避
- 区別・デバッグが困難な多くの小オブジェクトが生じる可能性

## 重要ポイント
- **動的拡張**：Decoratorは既存コード修正や継承使用なしで実行時に動作拡張を可能
- **透過インターフェース**：装飾されたオブジェクトは元と同じインターフェースを維持し、クライアントコードでの継目のない置換を可能
- **柔軟構成**：複数decoratorを様々な順序で組み合わせて異なる動作組み合わせを実現可能