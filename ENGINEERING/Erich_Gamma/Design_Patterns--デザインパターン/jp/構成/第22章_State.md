# 第22章：State（動作パターン）

## 章の概要
オブジェクトの内部状態が変化したときにその動作を変更でき、オブジェクトがクラスを変更したかのように見えるようにします。

## 主な内容

### 意図と構造
- 内部状態変化に基づいてオブジェクト動作を変更可能
- 状態依存動作のための大きな条件文を排除
- 状態オブジェクトによって状態遷移を明示的にする
- オブジェクトアイデンティティを維持しながら状態固有動作を可能

### パターン参加者
- **Context**：クライアントに関心のあるインターフェースを定義、現在状態を定義するConcreteStateサブクラスのインスタンスを維持
- **State**：Contextの特定状態に関連付けられた動作をカプセル化するための抽象インターフェース
- **ConcreteState**：各サブクラスがContextの状態に関連付けられた動作を実装

### 実装上の考慮事項
- Contextが状態固有リクエストを現在のConcreteStateオブジェクトに委譲
- 状態遷移はStateクラスまたはContextクラスによって制御可能
- インスタンス変数を持たない場合、状態は共有可能
- 状態オブジェクトの作成と破棄がパフォーマンスとメモリ使用に影響

## 重要ポイント
- **動作変化**：オブジェクトクラスやアイデンティティを変更せずに現在状態に基づいてオブジェクト動作が変化
- **状態カプセル化**：各状態の動作が別クラスにカプセル化され、コードをより保守しやすくする
- **明示的遷移**：状態変更が明示的で容易に追跡・制御可能