# 第21章：Observer（動作パターン）

## 章の概要
オブジェクト間の一対多の依存関係を定義し、あるオブジェクトが状態を変更した際に、すべての依存オブジェクトが自動的に通知され更新されるようにします。

## 主な内容

### 意図と構造
- 複数のオブザーバーがサブジェクトの状態変化の通知を必要とする場合に、オブジェクト間の動的関係を確立
- サブジェクトとオブザーバー間の疎結合を維持し、両方の独立変化を可能
- サブジェクトが特定のオブザーバーを知る必要がない放送通信を実現
- 実行時でのオブザーバー関係の動的追加と削除をサポート

### パターン参加者
- **Subject**：オブザーバーのリストを維持し、オブザーバーオブジェクトの添付/切り離しインターフェースを提供
- **Observer**：サブジェクトの変化を通知されるべきオブジェクトの更新インターフェースを定義
- **ConcreteSubject**：関心のある状態を保存し、状態変化時にオブザーバーに通知を送信
- **ConcreteObserver**：ConcreteSubjectオブジェクトへの参照を維持し、状態を一貫に保つため更新インターフェースを実装

### 実装上の考慮事項
- プッシュ対プル通知モデルがパフォーマンスと柔軟性のトレードオフに影響
- オブザーバーの登録と登録解除はメモリリークを防ぐため注意深く処理が必要
- 一部のアプリケーションでは更新順序が重要で、慎重なオブザーバーリスト管理が必要
- 複雑な更新依存関係には追加の調整メカニズムが必要な場合がある

## 重要ポイント
- **放送通信**：Observerは特定のタイプを知ることなく、登録されたすべてのオブザーバーに変更を放送する一対多通信を可能
- **疎結合**：サブジェクトとオブザーバーは疎結合で、サブジェクトはオブザーバーが更新インターフェースを実装していることのみ知り、独立修正を可能
- **動的関係**：オブザーバー関係は実行時に確立・変更可能で、変化する通信要件に対する柔軟性を提供